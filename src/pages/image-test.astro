---
import { Picture } from "astro:assets";
import snakeImage from "../assets/images/snake.png";
---

<!doctype html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>Astro Image Processing Test</title>
		<meta
			name="description"
			content="Testing Astro image processing with multiple formats and responsive sizing"
		/>
	</head>

	<body class="bg-gray-50 min-h-screen">
		<!-- Header -->
		<header class="bg-white shadow-sm">
			<div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6">
				<h1 class="text-3xl font-bold text-gray-900">Image Processing Test</h1>
				<p class="mt-2 text-gray-600">
					Testing Astro + Netlify image optimization with format fallbacks and
					responsive sizing
				</p>
			</div>
		</header>

		<!-- Main Content -->
		<main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12">
			<!-- Test Information -->
			<div class="mb-12 bg-white rounded-lg shadow-sm p-6">
				<h2 class="text-xl font-semibold text-gray-900 mb-4">
					Test Configuration
				</h2>
				<div class="grid grid-cols-1 md:grid-cols-2 gap-6 text-sm">
					<div>
						<h3 class="font-medium text-gray-900 mb-2">Source Image:</h3>
						<ul class="text-gray-600 space-y-1">
							<li>• Filename: snake.png</li>
							<li>• Original size: ~2.9MB</li>
							<li>• Location: src/assets/images/</li>
						</ul>
					</div>
					<div>
						<h3 class="font-medium text-gray-900 mb-2">Processing Settings:</h3>
						<ul class="text-gray-600 space-y-1">
							<li>• Formats: AVIF → WebP → JPG</li>
							<li>• Quality: 90 (high, for text readability)</li>
							<li>• Breakpoint: 768px</li>
							<li>• Max width: 1200px</li>
						</ul>
					</div>
				</div>
			</div>

			<!-- Hero Image Section -->
			<section class="bg-white rounded-lg shadow-sm overflow-hidden">
				<div class="p-6">
					<h2 class="text-2xl font-semibold text-gray-900 mb-4">
						Responsive Image Test
					</h2>
					<p class="text-gray-600 mb-6">
						The image below will serve different sizes based on your viewport
						width. Resize your browser or use device simulation to test
						responsiveness.
					</p>
				</div>

				<!-- The main image test -->
				<div class="w-full">
					<Picture
						src={snakeImage}
						alt="Snake test image for processing optimization"
						class="w-full h-auto max-w-none"
						loading="lazy"
						formats={["avif", "webp", "jpg"]}
						quality={90}
						widths={[400, 800, 1200]}
						sizes="(max-width: 768px) 400px, (max-width: 1200px) 800px, 1200px"
						style="max-width: 1200px; margin: 0 auto; display: block;"
					/>
				</div>

				<!-- Image Information -->
				<div class="p-6 border-t border-gray-200 bg-gray-50">
					<h3 class="font-medium text-gray-900 mb-3">Expected Behavior:</h3>
					<div
						class="grid grid-cols-1 md:grid-cols-2 gap-6 text-sm text-gray-600"
					>
						<div>
							<h4 class="font-medium text-gray-700 mb-2">Responsive Sizing:</h4>
							<ul class="space-y-1">
								<li>• Mobile (&lt;768px): 400px width</li>
								<li>• Tablet (768px-1200px): 800px width</li>
								<li>• Desktop (&gt;1200px): 1200px width</li>
							</ul>
						</div>
						<div>
							<h4 class="font-medium text-gray-700 mb-2">Format Fallbacks:</h4>
							<ul class="space-y-1">
								<li>• Modern browsers: AVIF format</li>
								<li>• Fallback 1: WebP format</li>
								<li>• Fallback 2: JPG format</li>
							</ul>
						</div>
					</div>
				</div>
			</section>

			<!-- Testing Instructions -->
			<div class="mt-12 bg-blue-50 rounded-lg p-6">
				<h3 class="text-lg font-semibold text-blue-900 mb-4">How to Test</h3>
				<div class="text-blue-800 space-y-4">
					<div>
						<h4 class="font-medium mb-2">1. Responsive Behavior:</h4>
						<p class="text-sm">
							Open browser dev tools, toggle device simulation, and resize
							viewport to see different image sizes load at the 768px
							breakpoint.
						</p>
					</div>
					<div>
						<h4 class="font-medium mb-2">2. Format Detection:</h4>
						<p class="text-sm">
							Check the Network tab in dev tools to see which image format your
							browser receives (AVIF for modern browsers, WebP/JPG for older
							ones).
						</p>
					</div>
					<div>
						<h4 class="font-medium mb-2">3. File Size Optimization:</h4>
						<p class="text-sm">
							Compare the processed image sizes in the Network tab to the
							original 2.9MB source file.
						</p>
					</div>
					<div>
						<h4 class="font-medium mb-2">4. Text Readability:</h4>
						<p class="text-sm">
							Zoom in on any text within the image to verify it remains crisp
							and readable after compression.
						</p>
					</div>
				</div>
			</div>
		</main>

		<!-- Footer -->
		<footer class="bg-white border-t border-gray-200 mt-16">
			<div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
				<p class="text-center text-gray-500 text-sm">
					Astro v5.13 + Netlify Image Processing Test |
					<a href="/" class="text-blue-600 hover:text-blue-800"
						>← Back to Home</a
					>
				</p>
			</div>
		</footer>
	</body>
</html>
